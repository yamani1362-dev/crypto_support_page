import json
import os

DATA_FILE = "finance_data.json"

def load_data():
    if os.path.exists(DATA_FILE):
        with open(DATA_FILE, "r") as f:
            return json.load(f)
    return {"income": [], "expenses": []}

def save_data(data):
    with open(DATA_FILE, "w") as f:
        json.dump(data, f, indent=4)

def add_income(amount, source):
    data = load_data()
    data["income"].append({"amount": amount, "source": source})
    save_data(data)
    print("âœ… Ø¯Ø±Ø¢Ù…Ø¯ Ø«Ø¨Øª Ø´Ø¯.")

def add_expense(amount, reason):
    data = load_data()
    data["expenses"].append({"amount": amount, "reason": reason})
    save_data(data)
    print("âœ… Ù‡Ø²ÛŒÙ†Ù‡ Ø«Ø¨Øª Ø´Ø¯.")

def show_report():
    data = load_data()
    total_income = sum(item["amount"] for item in data["income"])
    total_expenses = sum(item["amount"] for item in data["expenses"])
    balance = total_income - total_expenses
    
    print("\nğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ")
    print(f"Ø¯Ø±Ø¢Ù…Ø¯ Ú©Ù„: {total_income}")
    print(f"Ù‡Ø²ÛŒÙ†Ù‡ Ú©Ù„: {total_expenses}")
    print(f"Ù…ÙˆØ¬ÙˆØ¯ÛŒ: {balance}")

# Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡
if __name__ == "__main__":
    while True:
        print("\n1. Ø«Ø¨Øª Ø¯Ø±Ø¢Ù…Ø¯")
        print("2. Ø«Ø¨Øª Ù‡Ø²ÛŒÙ†Ù‡")
        print("3. Ú¯Ø²Ø§Ø±Ø´")
        print("4. Ø®Ø±ÙˆØ¬")

        choice = input("Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†: ")
        if choice == "1":
            amount = float(input("Ù…Ø¨Ù„Øº Ø¯Ø±Ø¢Ù…Ø¯: "))
            source = input("Ù…Ù†Ø¨Ø¹ Ø¯Ø±Ø¢Ù…Ø¯: ")
            add_income(amount, source)
        elif choice == "2":
            amount = float(input("Ù…Ø¨Ù„Øº Ù‡Ø²ÛŒÙ†Ù‡: "))
            reason = input("Ø¯Ù„ÛŒÙ„ Ù‡Ø²ÛŒÙ†Ù‡: ")
            add_expense(amount, reason)
        elif choice == "3":
            show_report()
        elif choice == "4":
            break
        else:
            print("Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø§Ù…Ø¹ØªØ¨Ø± âŒ")
